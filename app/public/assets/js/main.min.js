"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function activeTab(){var e=document.location.href;return e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."))}var html,body,scrollToTopButton;function scrollToTop(t,n){var o=Math.round(body.scrollTop||html.scrollTop),s=t,i=setInterval(function(){if(0<=s){var e=o*(1-easeInOut((t-s)/t,n));body.scrollTop=e,html.scrollTop=e,s--}else clearInterval(i)},1)}function easeInOut(e,t){return e<.5?.5*Math.pow(2*e,t):.5*(2-Math.pow(2*(1-e),t))}function controlScrollToTopButton(){var e=window.innerHeight;body.scrollTop>e||html.scrollTop>e?scrollToTopButton.classList.add("show"):scrollToTopButton.classList.remove("show")}function ajaxGet(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.addEventListener("load",function(){200<=n.status&&n.status<400?t(n.responseText):console.error(n.status+" "+n.statusText+" "+e)}),n.addEventListener("error",function(){console.error("Erreur réseau avec l'URL "+e)}),n.send(null)}function ajaxPost(e,t,n,o){var s=new XMLHttpRequest;s.open("POST",e),s.addEventListener("load",function(){200<=s.status&&s.status<400?n(s.responseText):console.error(s.status+" "+s.statusText+" "+e)}),s.addEventListener("error",function(){console.error("Erreur réseau avec l'URL "+e)}),o&&(s.setRequestHeader("Content-Type","application/json"),t=JSON.stringify(t)),s.send(t)}!function(e){function m(e){for(var t=0,n=e.length,o="",s=0;t<n;t++)0<=(o=e.charCodeAt(t))&&o<=25?s+=0:32<=o&&o<=8191?s+=1:8192<=o&&o<=65376?s+=2:65377<=o&&o<=65439?s+=1:65440<=o&&(s+=2);return s}e.mb_strwidth=m,e.mb_strimwidth=function(e,t,n,o){void 0===o&&(o="");for(var s=m(o),i=t,a=e.length,r=0,c="";i<a;i++){e.charCodeAt(i);var l=e.charAt(i),u=m(l),d=e.charAt(i+1);if(c+=l,n<(r+=u)+s+m(d)){c+=o;break}}return c}}(window),window.onload=function(){html=document.documentElement,body=document.body,scrollToTopButton=document.getElementById("scroll-to-top-button")},window.onscroll=controlScrollToTopButton;var BurgerMenu=function(){function e(){_classCallCheck(this,e),this.burgerButton=document.getElementById("burger-button"),this.mainNav=document.getElementById("main-nav"),this.menuList=document.querySelector(".menu-list"),this.topLine=document.querySelector(".top-line"),this.middleLine=document.querySelector(".middle-line"),this.bottomLine=document.querySelector(".bottom-line"),this.links=document.querySelectorAll(".menu-link a"),this.logo=document.querySelector("#main-logo img")}return _createClass(e,[{key:"highlightActiveLink",value:function(){var e=document.location.href,t=e.substring(e.lastIndexOf("/")+1,e.lastIndexOf("."));"welcome"===t&&(t=""),this.links.forEach(function(e){e.innerHTML.toLowerCase()===t&&(e.style.color="#9c2685")})}},{key:"onClick",value:function(){if(this.mainNav.classList.contains("opened"))return this.mainNav.classList.remove("opened"),this.menuList.classList.remove("opened"),this.topLine.classList.remove("opened"),this.middleLine.classList.remove("opened"),void this.bottomLine.classList.remove("opened");this.mainNav.classList.add("opened"),this.menuList.classList.add("opened"),this.topLine.classList.add("opened"),this.middleLine.classList.add("opened"),this.bottomLine.classList.add("opened"),this.logo.classList.remove("tiny"),this.mainNav.classList.remove("tiny")}},{key:"onScroll",value:function(){var t=this;window.addEventListener("scroll",function(){var e=window.pageYOffset||document.documentElement.scrollTop;t.mainNav.classList.contains("opened")||(40<=e&&(t.mainNav.classList.add("tiny"),t.logo.classList.add("tiny")),e<=60&&(t.mainNav.classList.remove("tiny"),t.logo.classList.remove("tiny")))},!1)}},{key:"run",value:function(){this.burgerButton.addEventListener("click",this.onClick.bind(this)),this.highlightActiveLink(),this.onScroll()}}]),e}(),DiscographyInformations=function(){function e(){_classCallCheck(this,e),this.covers=document.querySelectorAll(".cover"),this.asides=document.querySelectorAll("aside.record-info")}return _createClass(e,[{key:"run",value:function(){this.covers.forEach(function(e){var t=e.querySelector(".record-info");e.onclick=function(){t.classList.add("active"),document.querySelector("html").classList.add("scroll-off")}}),this.asides.forEach(function(t){t.onclick=function(e){t.classList.remove("active"),document.querySelector("html").classList.remove("scroll-off"),e.stopPropagation()}})}}]),e}(),MembersIdentificator=function(){function e(){_classCallCheck(this,e),this.members={jambon:document.getElementById("jambon"),arno:document.getElementById("arno"),lox:document.getElementById("lox"),mike:document.getElementById("mike")},this.images={classic:document.getElementById("classic-band"),glam:document.getElementById("glam-band")}}return _createClass(e,[{key:"onMouseEnter",value:function(e){document.querySelector("#".concat(e,"-text")).classList.add("hover-face"),this.images.classic.classList.add("hide"),this.images.glam.classList.remove("hide")}},{key:"onMouseLeave",value:function(e){document.querySelector("#".concat(e,"-text")).classList.remove("hover-face"),this.images.glam.classList.add("hide"),this.images.classic.classList.remove("hide")}},{key:"run",value:function(){function e(e){t.members[e].addEventListener("mouseenter",function(){this.onMouseEnter(e)}.bind(t)),t.members[e].addEventListener("mouseleave",function(){this.onMouseLeave(e)}.bind(t))}var t=this;for(var n in this.members)e(n)}}]),e}(),MerchPage=function(){function e(){_classCallCheck(this,e),this.categoriesContainer=document.querySelector("#categories ul"),this.categories=[],this.itemsContainer=document.querySelector("#items ul"),this.items=[]}return _createClass(e,[{key:"buildCategories",value:function(){var t=this;this.categoriesContainer.innerHTML='<li class="category"><a href="#" data-category-id="all">All Categories</a></li>',this.categories.forEach(function(e){t.categoriesContainer.innerHTML+='\n                <li class="category"><a href="#" data-category-id="'.concat(e.id,'">').concat(e.name,"</a></li>\n            ")}),document.querySelectorAll(".category").forEach(function(e){e.addEventListener("click",t.onClickCategory.bind(t))})}},{key:"buildItems",value:function(e){var n=this,o=0<arguments.length&&void 0!==e?e:"all";this.itemsContainer.innerHTML="",this.items.forEach(function(e){if(("all"===o||o===e.categories[0].id.toString())&&(n.itemsContainer.innerHTML+='\n                    <li class="item">\n                        <figure id="'.concat(e.id,'">\n                            <a href="https://eightsins.bigcartel.com').concat(e.url,'" target="_blank" rel="noopener">\n                                <img src="').concat(e.images[0].url,'?w=250"\n                                 alt="').concat(e.name,'"\n                                 title="').concat(e.name,'">\n                            </a>\n                            <figcaption>\n                                <h3>').concat(e.name,"</h3>\n                                <span>").concat(e.price.toLocaleString("fr-FR",{style:"currency",currency:"EUR"}),'</span>\n                                <span class="status">').concat(e.status,"</span>\n                            </figcaption>\n                        </figure>\n                    </li>\n                "),"T-Shirts"===e.categories[0].name||"Caps"===e.categories[0].name)){var t=document.createElement("aside");t.innerHTML=n.getOptions(e),document.getElementById(e.id).appendChild(t)}}),document.querySelectorAll(".status").forEach(function(e){"active"===e.innerText&&(e.style.display="none")})}},{key:"getOptions",value:function(e){var t="";switch(e.categories[0].name){case"T-Shirts":t="<p>Tailles disponibles :</p>";break;case"Caps":t="<p>Coloris disponibles :</p>"}return e.options.forEach(function(e){e.sold_out||(t+="<span>".concat(e.name,"</span>"))}),t}},{key:"setCategories",value:function(e){this.categories=JSON.parse(e).categories,this.buildCategories()}},{key:"setItems",value:function(e){this.items=JSON.parse(e),this.buildItems()}},{key:"onClickCategory",value:function(e){e.preventDefault(),this.buildItems(e.target.dataset.categoryId)}},{key:"run",value:function(){ajaxGet("https://api.bigcartel.com/eightsins/store.json",this.setCategories.bind(this)),ajaxGet("https://api.bigcartel.com/eightsins/products.json",this.setItems.bind(this))}}]),e}();document.addEventListener("DOMContentLoaded",function(){switch((new BurgerMenu).run(),document.getElementById("scroll-to-top-button").addEventListener("click",function(){scrollToTop(300,3)}),activeTab()){case"band":(new MembersIdentificator).run();break;case"merch":(new MerchPage).run();break;case"music":(new DiscographyInformations).run();break;case"news":var e=document.querySelectorAll(".news .content"),t=100;767<window.outerWidth&&(t=350),e.forEach(function(e){e.innerHTML=mb_strimwidth(e.innerText,0,t,"(...)")});break;case"article":var n=document.querySelector("iframe"),o=window.outerWidth;n&&o<=500&&(o-=30,n.width=o.toString(),n.height=(parseInt(n.width)/1.78).toString())}});